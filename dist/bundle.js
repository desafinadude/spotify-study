(()=>{var t=`\n\n\t.spotify_study_btn {\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t}\n\n\t.current_speed {\n\t\tcolor: #fff;\n\t\tfont-size: 2em;\n\t}\n\n\t.celerity {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tright: 0;\n\t\twidth: 400px;\n\t\theight: ${window.innerHeight-100}px;\n\t\tz-index: 9;\n\t\tbackground-color: var(--background-base);\n    \tborder-radius: 8px;\n    \tcursor: default;\n\t\tpadding: 8px 16px;\n\t}\n\n\t.celerity header {\n\t\tfont-weight: bold;\n\t}\n\n\t.markers_list {\n\t\tlist-style: none;\n\t}\n\n\t.marker {\n\t\tpadding: 5px;\n\t\tborder-radius: 5px;\n\t}\n\n\t.marker_title {\n\t\tcolor: #fff;\n\t\tfont-weight: bold;\n\t}\n\n\t.inc, .dec {\n\t\tbackground: #666;\n\t\tcolor: #000;\n\t\tfont-weight: bold;\n\t\ttext-align: center;\n\t\tborder: 1px solid #666;\n\t\tcursor: pointer;\n\t}\n\n\t.dec {\n\t\tborder-radius: 5px 0 0 5px;\n\t}\n\n\t.inc {\n\t\tborder-radius: 0 5px 5px 0;\n\t}\n\n\t.inc:hover, .dec:hover {\n\t\tbackground: #1FDF64;\n\t\tborder: 1px solid #1FDF64;\n\t}\n\n\t.marker_playing {\n\t\tbackground-color: #1A1A1A;\n\t}\n\n\t.controls {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgrid-template-rows: 1fr;\n\t\tgap: 0px 0px;\n\t\tgrid-auto-flow: row;\n\t\tgrid-template-areas: "speed add_marker";\n\t\tmargin-bottom: 10px;\n\t}\n\n\t.speed {\n\t\tgrid-area: speed;\n\t\talign-self: center;\n\t}\n\n\t.add_marker {\n\t\tgrid-area: add_marker;\n\t\talign-self: center;\n\t\tjustify-self: end;\n\t\tcursor: pointer;\n\t}\n\n\t.marker_layout {  display: grid;\n\t\tgrid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;\n\t\tgrid-template-rows: 1fr 1fr;\n\t\tgap: 5px 5px;\n\t\tgrid-auto-flow: row;\n\t\tgrid-template-areas:\n\t\t  "marker_play marker_name marker_name marker_name marker_name marker_delete"\n\t\t  "start_time start_time start_time end_time end_time end_time";\n\t  }\n\t  \n\t.marker_name {\n\t\talign-self: center; \n\t\tgrid-area: marker_name; \n\t}\n\n\t.marker_play {\n\t\talign-self: center;\n\t\tgrid-area: marker_play;\n\t}\n\n\t.marker_delete {\n\t\talign-self: center;\n\t\tgrid-area: marker_delete;\n\t\tjustify-self: end; \n\t}\n\t  \n\t.start_time { \n\t\tgrid-area: start_time; \n\t}\n\t\n\t.end_time { \n\t\tgrid-area: end_time; \n\t}\n\n\t.icon {\n\t\tcursor: pointer;\n\t}\n\n\t.icon:hover path {\n\t\tfill: #1FDF64;\n\t}\n\n\t.marker_time_container {  \n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 2fr 1fr;\n\t\tgrid-template-rows: 1fr;\n\t\tgap: 0px 0px;\n\t\tgrid-auto-flow: row;\n\t\tgrid-template-areas: "dec time inc";\n\t}\n\n\t.dec { \n\t\tgrid-area: dec;\n\t\talign-self: center;  \n\t}\n\n\t.time { \n\t\tgrid-area: time; \n\t\talign-self: center; \n\t\ttext-align: center;\n\t\tborder: 1px solid #666;\n\t}\n\n\t.inc { \n\t\tgrid-area: inc;\n\t\talign-self: center;  \n\t}\n\n`,e=document.createElement("script");e.textContent="\n\n\tvar base = document.createElement; /* A backup reference to the browser's original document.createElement */\n\tvar spotifyElements = []; /* Array of video/audio elements made by spotify's scripts */\n\t\n\t/* Replacing the DOM's original reference to the browser's createElement function */\n\tdocument.createElement = function(message) {\n\t\t/* base.apply is calling the backup reference of createElement with the arguments sent to our function and assigning it to our variable named element */\n\t\tvar element = base.apply(this, arguments); \n\t\t\n\t\t/* we check the first argument sent to us Examp. document.createElement('video') would have message = 'video' */\n\t\t/* ignores the many document.createElement('div'), document.createElement('nav'), ect... */\n\t\tif(message == 'video' || message == 'audio'){ /* Checking if spotify scripts are making a video or audio element */\n\t\t\tspotifyElements.push(element);\n\t\t}\n\t\treturn element /* return the element and complete the loop so the page is allowed to be made */\n\t};\n\t\n\t\n\twindow.onload = function() {\n\n\t\tconst speeds = [0.25, 0.5, 0.75, 1.0, 1.25, 1.5, 2.0];\n\t\tvar celerityData = JSON.parse(localStorage.getItem('celerity'));\n\t\tvar lastSpeed = celerityData ? celerityData.lastSpeed : 1.0;\n\t\tvar currentSection = null;\n\t\tvar currentSectionStart = null;\n\t\tvar currentSectionEnd = null;\n\t\t\n\t\tconst addMarkerIcon = '<svg class=\"icon add-marker-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"30\" height=\"30\"><title>plus</title><path fill=\"#eee\" d=\"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z\" /></svg>';\n\n\t\tconst playIcon = '<svg class=\"icon play-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"20\" height=\"20\"><title>play</title><path fill=\"#eee\" d=\"M8,5.14V19.14L19,12.14L8,5.14Z\" /></svg>';\n\t\t\n\t\tconst pauseIcon = '<svg class=\"icon pause-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"20\" height=\"20\"><title>pause</title><path fill=\"#eee\" d=\"M14,19H18V5H14M6,19H10V5H6V19Z\" /></svg>';\n\n\t\tconst deleteIcon = '<svg class=\"icon delete-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"20\" height=\"20\"><title>delete</title><path fill=\"#eee\" d=\"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z\" /></svg>';\n\n\t\tconst studyIcon = '<svg class=\"icon spotify-study-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"20\" height=\"20\"><title>school</title><path fill=\"#eee\" d=\"M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z\" /></svg>';\n\n\n\t\t/* add Celerity to the page */\n\t\tvar celerity = document.createElement('div');\n\t\tcelerity.id = 'celerity';\n\t\tcelerity.classList.add('celerity');\n\t\tcelerity.style.display = 'none';\n\t\tcelerity.innerHTML = '\t\t\t<header>Spotify Study</header> \t\t\t<div class=\"controls\"> \t\t\t\t<div id=\"current_speed\" class=\"current_speed\">' + lastSpeed + 'x</div> \t\t\t\t<div class=\"add_marker\">' + addMarkerIcon + '</div> \t\t\t</div> \t\t\t<ul id=\"markers_list\" class=\"markers_list\"></ul>\t\t';\n\n\t\t/* add Spotify Study load icon to footer */\n\t\t\n\t\tvar spotifyStudyBtn = document.createElement('button');\n\t\tspotifyStudyBtn.classList.add('spotify_study_btn');\n\t\tspotifyStudyBtn.innerHTML = studyIcon;\n\n\n\t\tfunction calculateTime(duration) {\n\n\t\t\t// return time as 01:23.34\n\t\t\tvar minutes = parseInt(duration / 60, 10);\n\t\t\tvar seconds = parseInt(duration % 60);\n\t\t\tvar milliseconds = parseInt((duration % 1) * 100, 10);\n\n\t\t\tminutes = minutes < 10 ? \"0\" + minutes : minutes;\n\t\t\tseconds = seconds < 10 ? \"0\" + seconds : seconds;\n\t\t\tmilliseconds = milliseconds < 10 ? \"0\" + milliseconds : milliseconds;\n\n\t\t\treturn minutes + \":\" + seconds + \".\" + milliseconds;\n\n\n\t\t}\n\t\t\n\t\tfunction validateAndChangePosition(value){\n\t\t\tif(!isNaN(input2.value)){ \n\t\t\t\tchangePosition(input2.value);\n\t\t\t}\n\t\t}\n\n\t\t\n\t\tfunction validateAndChangeSpeed(value){ \n\t\t\tvar val = parseFloat( value );\n\t\t\tif(!isNaN(val)){\n\t\t\t\tchangeSpeed(val);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction changeSpeed(val) {\n\t\t\tfor(var i = 0; i < spotifyElements.length; i++){ \n\t\t\t\tspotifyElements[i].playbackRate = val; \n\t\t\t\tif(val != lastSpeed){ \n\t\t\t\t\tlastSpeed = val;\n\t\t\t\t\tlet currentSpd = document.getElementById('current_speed');\n\t\t\t\t\tcurrentSpd.innerHTML = val + 'x';\n\t\t\t\t\tcelerityData.lastSpeed = val;\n\t\t\t\t\tlocalStorage.setItem('celerity', JSON.stringify(celerityData));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction changePosition(val) {\n\t\t\tfor(var i = 0; i < spotifyElements.length; i++){ \n\t\t\t\tspotifyElements[i].currentTime = val; \n\t\t\t}\n\t\t}\n\n\t\t\n\t\tfunction songPlaying() {\n\n\t\t\tconst checkCurrentTime = setInterval(function() {\n\t\t\t\tif(currentSection) {\n\t\t\t\t\tfor(var i = 0; i < spotifyElements.length; i++){\n\t\t\t\t\t\tif (spotifyElements[i].currentTime >= currentSectionEnd) {\n\t\t\t\t\t\t\tspotifyElements[i].currentTime = currentSectionStart;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 500); \n\t\t}\n\n\t\t// MARKERS\n\n\t\tfunction listMarkers() {\n\t\t\t// list markers from localstorage\n\t\t\tvar markers = celerityData.markers;\n\n\t\t\t// Get only the markers for the current src\n\t\t\tvar currentMarkers = [];\n\t\t\tfor(var i = 0; i < markers.length; i++){\n\t\t\t\tvar marker = markers[i];\n\t\t\t\tif(marker.track == document.querySelector('[data-testid=\"now-playing-widget\"]').getAttribute('aria-label').replace('Now playing: ', '')) {\n\t\t\t\t\tcurrentMarkers.push(marker);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdocument.querySelector('.markers_list').innerHTML = '';\n\t\t\tfor(var i = 0; i < currentMarkers.length; i++){\n\t\t\t\tvar marker = currentMarkers[i];\n\t\t\t\tvar markerElement = document.createElement('li');\n\t\t\t\tmarkerElement.classList.add('marker');\n\t\t\t\tcurrentSection == marker.id ? markerElement.classList.add('marker_playing') : '';\n\t\t\t\tmarkerElement.innerHTML = '<div class=\"marker_layout\"> \t\t\t\t\t<div class=\"marker_play\">' + playIcon + '</div> \t\t\t\t\t<div class=\"marker_name\"><div class=\"marker_title\">' + marker.name + '</div></div> \t\t\t\t\t<div class=\"marker_delete\">' + deleteIcon + '</div> \t\t\t\t\t<div class=\"marker_time_container start_time\"> \t\t\t\t\t\t<div class=\"dec\">-</div> \t\t\t\t\t\t<div class=\"time\"><div class=\"marker_start\">' + calculateTime(marker.start) + '</div></div> \t\t\t\t\t\t<div class=\"inc\">+</div> \t\t\t\t\t</div> \t\t\t\t\t<div class=\"marker_time_container end_time\"> \t\t\t\t\t\t<div class=\"dec\">-</div> \t\t\t\t\t\t<div class=\"time\"><div class=\"marker_end\">' + calculateTime(marker.end) + '</div></div> \t\t\t\t\t\t<div class=\"inc\">+</div> \t\t\t\t\t</div> \t\t\t\t</div>';\n\t\t\t\t\n\t\t\t\tcurrentSection == marker.id ? markerElement.querySelector('.marker_play').innerHTML = pauseIcon : playIcon;\n\t\t\t\tmarkerElement.setAttribute('data-start', marker.start);\n\t\t\t\tmarkerElement.setAttribute('data-end', marker.end);\n\t\t\t\tmarkerElement.setAttribute('data-id', marker.id);\n\t\t\t\tdocument.querySelector('.markers_list').appendChild(markerElement);\n\t\t\t}\n\n\t\t\taddMarkerEventListeners();\n\t\t}\n\n\t\tfunction randomIdGenerator() {\n\t\t\treturn Math.random().toString(36).substr(2, 9);\n\t\t}\n\n\n\t\tfunction addMarkerEventListeners() {\n\t\t\t// add event listeners to markers\n\t\t\tdocument.querySelectorAll('.marker_play').forEach(function(el) {\n\t\t\t\tel.addEventListener('click', function(e) {\n\n\t\t\t\t\tdocument.querySelectorAll('.marker').forEach(function(el){\n\t\t\t\t\t\tel.classList.remove('marker_playing');\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// parent of this\n\t\t\t\t\tvar parent = this.parentNode.parentNode;\n\n\t\t\t\t\tif(currentSection != parent.getAttribute('data-id')) {\n\t\t\t\t\t\tfor(var i = 0; i < spotifyElements.length; i++){\n\t\t\t\t\t\t\tspotifyElements[i].play();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparent.classList.add('marker_playing');\n\t\t\t\t\t\tvar start = parent.getAttribute('data-start');\n\t\t\t\t\t\tvar end = parent.getAttribute('data-end');\n\t\t\t\t\t\tvar id = parent.getAttribute('data-id');\n\t\t\t\t\t\tel.innerHTML = pauseIcon;\n\t\t\t\t\t\tcurrentSection = id;\n\t\t\t\t\t\tcurrentSectionStart = start;\n\t\t\t\t\t\tcurrentSectionEnd = end;\n\t\t\t\t\t\tchangePosition(start);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.classList.remove('marker_playing');\n\t\t\t\t\t\tel.innerHTML = playIcon;\n\t\t\t\t\t\tfor(var i = 0; i < spotifyElements.length; i++){\n\t\t\t\t\t\t\tspotifyElements[i].pause();\n\t\t\t\t\t\t\tcurrentSection = null;\n\t\t\t\t\t\t\tcurrentSectionStart = null;\n\t\t\t\t\t\t\tcurrentSectionEnd = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tdocument.querySelectorAll('.marker_delete').forEach(function(el) {\n\t\t\t\tel.addEventListener('click', function(e) {\n\t\t\t\t\tvar parent = this.parentNode.parentNode;\n\t\t\t\t\tvar id = parent.getAttribute('data-id');\n\t\t\t\t\tdeleteMarker(id);\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tdocument.querySelectorAll('.dec').forEach(function(el) {\n\t\t\t\tel.addEventListener('click', function(e) {\n\t\t\t\t\tvar parent = this.parentNode.parentNode.parentNode;\n\t\t\t\t\tvar id = parent.getAttribute('data-id');\n\t\t\t\t\tadjustMarker(id, this.parentNode.classList.contains('start_time') ? 'start' : 'end', 'dec');\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tdocument.querySelectorAll('.inc').forEach(function(el) {\n\t\t\t\tel.addEventListener('click', function(e) {\n\t\t\t\t\tvar parent = this.parentNode.parentNode.parentNode;\n\t\t\t\t\tvar id = parent.getAttribute('data-id');\n\t\t\t\t\tadjustMarker(id, this.parentNode.classList.contains('start_time') ? 'start' : 'end', 'inc');\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tdocument.querySelectorAll('.marker_name').forEach(function(el) {\n\t\t\t\tel.addEventListener('click', function(e) {\n\t\t\t\t\tvar parent = this.parentNode.parentNode;\n\t\t\t\t\tvar id = parent.getAttribute('data-id');\n\t\t\t\t\tvar name = prompt('Enter a name for this marker');\n\t\t\t\t\tif(name){\n\t\t\t\t\t\tupdateMarkerName(id, name);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\n\t\t}\n\n\t\tfunction addMarker() {\n\t\t\t// add a marker to localstorage\n\t\t\tvar marker = {\n\t\t\t\t'track': document.querySelector('[data-testid=\"now-playing-widget\"]').getAttribute('aria-label').replace('Now playing: ', ''),\n\t\t\t\t'duration': spotifyElements[0].duration,\n\t\t\t\t'id': randomIdGenerator(),\n\t\t\t\t'name': 'Marker',\n\t\t\t\t'start': spotifyElements[0].currentTime,\n\t\t\t\t'end': spotifyElements[0].currentTime + 5,\n\t\t\t};\n\t\t\tif(celerityData){\n\t\t\t\tcelerityData.markers.push(marker);\n\t\t\t} else {\n\t\t\t\tcelerityData = {\n\t\t\t\t\t'markers': [marker],\n\t\t\t\t\t'lastSpeed': 1.0,\n\t\t\t\t};\n\t\t\t}\n\t\t\tlocalStorage.setItem('celerity', JSON.stringify(celerityData));\n\t\t\tlistMarkers();\n\t\t\t\n\t\t}\n\n\t\tfunction deleteMarker(id) {\n\t\t\t// delete a marker from localstorage\n\t\t\tvar markers = celerityData.markers;\n\t\t\tfor(var i = 0; i < markers.length; i++){\n\t\t\t\tvar marker = markers[i];\n\t\t\t\tif(marker.id == id){\n\t\t\t\t\tmarkers.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcelerityData.markers = markers;\n\t\t\tlocalStorage.setItem('celerity', JSON.stringify(celerityData));\n\t\t\tcurrentSection = null;\n\t\t\tcurrentSectionStart = null;\n\t\t\tcurrentSectionEnd = null;\n\t\t\tlistMarkers();\n\t\t}\n\n\t\tfunction adjustMarker(id, startend, direction) {\n\n\t\t\t// DECREASE\n\n\t\t\tif(direction == 'dec') {\n\n\t\t\t\tif(startend == 'start') {\n\t\t\t\t\tvar start = parseFloat(document.querySelector('[data-id=\"' + id + '\"]').getAttribute('data-start'));\n\t\t\t\t\tvar newStart = start - 0.1;\n\t\t\t\t\tif(newStart < 0) {\n\t\t\t\t\t\tnewStart = 0;\n\t\t\t\t\t}\n\t\t\t\t\tvar markers = celerityData.markers;\n\t\t\t\t\tfor(var i = 0; i < markers.length; i++){\n\t\t\t\t\t\tvar marker = markers[i];\n\t\t\t\t\t\tif(marker.id == id) {\n\t\t\t\t\t\t\tmarker.start = newStart;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(currentSection == id) {\n\t\t\t\t\t\t\tcurrentSectionStart = newStart;\n\t\t\t\t\t\t\tchangePosition(newStart);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar end = parseFloat(document.querySelector('[data-id=\"' + id + '\"]').getAttribute('data-end'));\n\t\t\t\t\tvar newEnd = end - 0.1;\n\t\t\t\t\tif(newEnd <= parseFloat(document.querySelector('[data-id=\"' + id + '\"]').getAttribute('data-start'))) {\n\t\t\t\t\t\tnewEnd = end;\n\t\t\t\t\t}\n\t\t\t\t\tvar markers = celerityData.markers;\n\t\t\t\t\tfor(var i = 0; i < markers.length; i++){\n\t\t\t\t\t\tvar marker = markers[i];\n\t\t\t\t\t\tif(marker.id == id) {\n\t\t\t\t\t\t\tmarker.end = newEnd;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(currentSection == id) {\n\t\t\t\t\t\t\tcurrentSectionEnd = newEnd;\n\t\t\t\t\t\t\tchangePosition(newEnd - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t// INCREASE\n\n\t\t\t\tif(startend == 'start') {\n\t\t\t\t\tvar start = parseFloat(document.querySelector('[data-id=\"' + id + '\"]').getAttribute('data-start'));\n\t\t\t\t\tvar newStart = start + 0.1;\n\n\t\t\t\t\tif(newStart >= parseFloat(document.querySelector('[data-id=\"' + id + '\"]').getAttribute('data-end'))) {\n\t\t\t\t\t\tnewStart = start;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar markers = celerityData.markers;\n\t\t\t\t\tfor(var i = 0; i < markers.length; i++){\n\t\t\t\t\t\tvar marker = markers[i];\n\t\t\t\t\t\tif(marker.id == id) {\n\t\t\t\t\t\t\tmarker.start = newStart;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(currentSection == id) {\n\t\t\t\t\t\t\tcurrentSectionStart = newStart;\n\t\t\t\t\t\t\tchangePosition(newStart);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcelerityData.markers = markers;\n\t\t\t\t\tlocalStorage.setItem('celerity', JSON.stringify(celerityData));\n\n\n\t\t\t\t} else {\n\t\t\t\t\tvar end = parseFloat(document.querySelector('[data-id=\"' + id + '\"]').getAttribute('data-end'));\n\t\t\t\t\tvar newEnd = end + 0.1;\n\n\t\t\t\t\tif(newEnd > spotifyElements[0].duration) {\n\t\t\t\t\t\tnewEnd = end;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar markers = celerityData.markers;\n\t\t\t\t\tfor(var i = 0; i < markers.length; i++){\n\t\t\t\t\t\tvar marker = markers[i];\n\t\t\t\t\t\tif(marker.id == id) {\n\t\t\t\t\t\t\tmarker.end = newEnd;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(currentSection == id) {\n\t\t\t\t\t\t\tcurrentSectionEnd = newEnd;\n\t\t\t\t\t\t\tchangePosition(newEnd - 0.1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcelerityData.markers = markers;\n\t\t\t\t\tlocalStorage.setItem('celerity', JSON.stringify(celerityData));\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcelerityData.markers = markers;\n\t\t\tlocalStorage.setItem('celerity', JSON.stringify(celerityData));\n\t\t\tlistMarkers();\n\n\t\t}\n\n\t\tfunction updateMarkerName(id, name) {\n\n\t\t\tvar markers = celerityData.markers;\n\t\t\tfor(var i = 0; i < markers.length; i++){\n\t\t\t\tvar marker = markers[i];\n\t\t\t\tif(marker.id == id) {\n\t\t\t\t\tmarker.name = name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcelerityData.markers = markers;\n\t\t\tlocalStorage.setItem('celerity', JSON.stringify(celerityData));\n\t\t\tlistMarkers();\n\t\t}\n\n\n\n\t\tdocument.addEventListener('keydown', function(event) {\n\n\t\t\tswitch (event.key) {\n\t\t\t\tcase '-':\n\t\t\t\t\tvar speedPosition = speeds.indexOf(lastSpeed);\n\t\t\t\t\tif(speedPosition > 0){\n\t\t\t\t\t\tvalidateAndChangeSpeed(speeds[speedPosition - 1]);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '+':\n\t\t\t\t\tvar speedPosition = speeds.indexOf(lastSpeed);\n\t\t\t\t\tif(speedPosition < speeds.length - 1){\n\t\t\t\t\t\tvalidateAndChangeSpeed(speeds[speedPosition + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase '*':\n\t\t\t\t\tvalidateAndChangeSpeed(1.0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase '0':\n\t\t\t\t\taddMarker();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Delete':\n\t\t\t\t\tdeleteMarker(currentSection);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowLeft':\n\t\t\t\t\tadjustMarker(currentSection, 'start', 'dec', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight':\n\t\t\t\t\tadjustMarker(currentSection, 'start', 'inc', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowUp':\n\t\t\t\t\tadjustMarker(currentSection, 'end', 'inc', true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowDown':\n\t\t\t\t\tadjustMarker(currentSection, 'end', 'dec', true);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\n\n\t\t});\n\n\t\t\n\n\t\t\n\t\tfunction timeout() { \n\n\n\n\n\t\t\tif(document.getElementById('celerity') == null) \n\t\t\t{\n\t\t\t\ttry {\n\t\t\t\t\tdocument.querySelector('#main > div > div:nth-child(2)').appendChild(celerity);\n\t\t\t\t\tdocument.querySelector('footer > div > div:nth-child(3) > div').appendChild(spotifyStudyBtn);\n\t\t\t\t\tdocument.querySelector('.spotify_study_btn').addEventListener('click', function(){\n\t\t\t\t\t\tif(document.getElementById('celerity').style.display == 'none'){\n\t\t\t\t\t\t\tdocument.getElementById('celerity').style.display = 'block';\n\t\t\t\t\t\t\tlistMarkers();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.getElementById('celerity').style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tdocument.querySelector('.add_marker').addEventListener('click', addMarker);\n\t\t\t\t\t\n\t\t\t\t\tif(spotifyElements.length > 0){\n\t\t\t\t\t\tspotifyElements[0].addEventListener('playing', songPlaying(spotifyElements[0]));\n\t\t\t\t\t}\n\t\t\t\t} catch {\n\t\t\t\t\tsetTimeout(timeout, 100);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetTimeout(function () { \n\t\t\t\ttry {\n\t\t\t\t\tsongPlaying();\n\t\t\t\t} catch {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\ttimeout(); \n\t\t\t}, 500); \n\t\t}\n\t\t\n\t\ttimeout(); \n\t};",e.type="module",document.body.appendChild(e);var n=document.createElement("style");n.textContent=t,document.head.appendChild(n),(document.head||document.documentElement).appendChild(e),(document.head||document.documentElement).appendChild(n),e.remove()})();